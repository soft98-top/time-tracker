# Time Tracker 🕐

中文版 | [English](README.md)

一个基于番茄工作法的增强版时间管理工具，支持灵活的状态切换和个性化配置。

## ✨ 功能特性

- 🔄 **灵活状态切换**: 不强制切换状态，允许用户在达到预设时间后继续当前状态
- ⚙️ **个性化配置**: 可自定义专注、休息、反思时长和专注失败时间
- 📊 **统计分析**: 详细的时间统计和历史记录分析
- 🔔 **智能提醒**: 支持桌面通知和声音提醒
- 📱 **PWA 支持**: 可安装到设备，支持离线使用
- 🎨 **响应式设计**: 完美适配桌面和移动设备
- 💾 **数据持久化**: 本地存储，支持数据导出导入
- 🛡️ **异常恢复**: 应用崩溃后自动恢复状态

## 🚀 快速开始

### 在线使用

🌐 **在线体验**: [https://soft98-top.github.io/time-tracker](https://soft98-top.github.io/time-tracker)

直接访问应用开始使用，无需安装。

### 本地开发

```bash
# 克隆项目
git clone https://github.com/soft98-top/time-tracker.git
cd time-tracker

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 快速部署到 GitHub Pages
npm run deploy:github
```

### 🚀 GitHub Pages 自动部署

项目已配置 GitHub Actions 自动部署工作流，支持以下特性：

#### 自动化流程
1. **代码推送**: 推送到 `main` 分支自动触发部署
2. **质量检查**: 自动运行完整测试套件
3. **生产构建**: 使用 Vite 构建优化后的生产版本
4. **自动部署**: 部署到 GitHub Pages

#### 快速部署
```bash
# 一键部署（推荐）
npm run deploy:github

# 或者手动操作
git add .
git commit -m "your commit message"
git push origin main
```

#### 访问地址
- 🌐 **生产环境**: [https://soft98-top.github.io/time-tracker](https://soft98-top.github.io/time-tracker)
- ⏳ **部署时间**: 通常需要 2-5 分钟完成构建和部署

## 📖 使用指南

### 基本概念

Time Tracker 包含四种状态：

- **无状态 (Idle)**: 初始状态，可以开始专注
- **专注 (Focus)**: 工作状态，专注于当前任务
- **反思 (Reflection)**: 总结专注成果，提高自我认知
- **休息 (Rest)**: 放松恢复，为下一轮专注做准备

### 核心规则

#### 专注状态规则
- 专注时间未超过"专注失败时间"时，只能取消操作（记录为专注失败）
- 超过"专注失败时间"后，可以切换到反思或休息状态
- 达到默认专注时长时会收到提醒，但可以继续专注

#### 反思状态规则
- 可以从专注状态切换而来
- 达到默认反思时长时会收到提醒
- 可以切换到休息状态或取消回到无状态

#### 休息状态规则
- 可以从专注或反思状态切换而来
- 达到默认休息时长时会收到提醒
- 可以切换到专注状态或取消回到无状态

### 配置说明

在设置页面可以配置以下参数：

- **专注时长**: 默认专注时间（建议 25 分钟）
- **休息时长**: 默认休息时间（建议 5 分钟）
- **反思时长**: 默认反思时间（建议 3 分钟）
- **专注失败时间**: 最小有效专注时间（建议 2 分钟）
- **桌面通知**: 启用浏览器桌面通知
- **声音提醒**: 启用声音提醒功能

## 📊 统计功能

### 时间统计
- 今日、本周、本月的专注/反思/休息时长统计
- 专注成功率和失败次数统计
- 平均专注时长和最长专注记录

### 历史记录
- 详细的会话记录，包括开始时间、结束时间、持续时长
- 按状态类型筛选记录
- 专注失败和成功记录的区分显示

## 🛠️ 开发

### 技术栈
- **前端框架**: React 19 + TypeScript
- **构建工具**: Vite
- **测试框架**: Vitest + Testing Library
- **代码规范**: ESLint + TypeScript ESLint

### 开发命令

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 运行测试
npm run test

# 运行测试（单次）
npm run test:run

# 构建生产版本
npm run build

# 代码检查
npm run lint

# 预览构建结果
npm run preview

# 检查部署状态
npm run deploy:check
```

## ❓ 常见问题

### Q: 为什么叫"灵活"时间管理？
A: 与传统番茄时钟强制切换状态不同，本工具允许用户在达到预设时间后选择是否继续当前状态，提供更灵活的时间管理方式。

### Q: 专注失败时间是什么意思？
A: 这是为了避免频繁开关计时器而设置的最小有效专注时间。在此时间内取消专注会被记录为失败，超过此时间的专注才被认为是有效的。

### Q: 数据会丢失吗？
A: 所有数据保存在浏览器本地存储中，不会上传到服务器。建议定期导出数据备份。清除浏览器数据会导致数据丢失。

### Q: 通知不工作怎么办？
A: 请检查浏览器通知权限设置，确保允许网站发送通知。某些浏览器可能需要用户交互后才能请求通知权限。

## 📚 文档

- [用户手册](docs/USER_MANUAL.md) - 详细的使用指南和功能说明
- [常见问题](docs/FAQ.md) - 常见问题解答和故障排除
- [部署指南](docs/DEPLOYMENT.md) - 部署配置和优化建议

## 📄 许可证

MIT License